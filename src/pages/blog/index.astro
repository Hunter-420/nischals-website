---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.date.valueOf() - a.data.date.valueOf()
);
const base = import.meta.env.BASE_URL;
---

<BaseLayout pageTitle="Blog - Nischal Khanal" description="Essays and articles by Nischal Khanal">
	<div class="container">
        <h1>Blog</h1>
        <p> <a href={base}>Home</a> </p>
        <hr />
		<div class="section">
			<ul>
				{
					posts.map((post) => (
						<li>
							<a href={`${base}blog/${post.slug}/`}>
                                <time datetime={post.data.date.toISOString()}>
                                    {post.data.date.toLocaleDateString('en-us', {
                                        year: 'numeric',
                                        month: 'short',
                                        day: 'numeric',
                                    })}
                                </time>
                                - {post.data.title}
                            </a>
						</li>
					))
				}
			</ul>
		</div>
        <hr />
        <p> <a href={`${base}tags`}>Browse by Tags</a> </p>
	</div>
</BaseLayout>
